# 5.2.2

Release date: `2021-0x-xx`

## Core

- [NXDRIVE-2218](https://jira.nuxeo.com/browse/NXDRIVE-2218): Introduce (database) Migrations objects
- [NXDRIVE-2548](https://jira.nuxeo.com/browse/NXDRIVE-2548): Databases refactoring
- [NXDRIVE-2640](https://jira.nuxeo.com/browse/NXDRIVE-2640): [Windows] Remote deletions are not locally impacted when the local folder is a UNC name
- [NXDRIVE-2654](https://jira.nuxeo.com/browse/NXDRIVE-2654): Remove the `execution.profile` custom metric
- [NXDRIVE-2656](https://jira.nuxeo.com/browse/NXDRIVE-2656): Improve crash file handling
- [NXDRIVE-2657](https://jira.nuxeo.com/browse/NXDRIVE-2657): Fix database `is_healthy()` check to ensure to close the connection
- [NXDRIVE-2659](https://jira.nuxeo.com/browse/NXDRIVE-2659): [macOS] Handle unsupported command `nxdrive://trigger-watch` in protocol handler
- [NXDRIVE-2661](https://jira.nuxeo.com/browse/NXDRIVE-2661): Set a higher logging level for `Options` changes

### Direct Edit

- [NXDRIVE-2658](https://jira.nuxeo.com/browse/NXDRIVE-2658): Handle invalid data returned by the server when retrieving file infos

### Direct Transfer

- [NXDRIVE-2](https://jira.nuxeo.com/browse/NXDRIVE-2):

## GUI

- [NXDRIVE-2](https://jira.nuxeo.com/browse/NXDRIVE-2):

## Packaging / Build

- [NXDRIVE-2](https://jira.nuxeo.com/browse/NXDRIVE-2):

## Tests

- [NXDRIVE-2](https://jira.nuxeo.com/browse/NXDRIVE-2):

## Docs

- [NXDRIVE-2](https://jira.nuxeo.com/browse/NXDRIVE-2):

## Minor Changes

- Upgraded `certifi` from 2020.12.5 to 2021.5.30
- Upgraded `pefile` from 2021.5.13 to 2021.5.24
- Upgraded `pywin32` from 300 to 301
- Upgraded `urllib3` from 1.26.4 to 1.26.5

## Technical Changes

- Added `LocalClientMixin.can_use_trash()`
- Chanded `Engine.use_trash()`: it is no more a static method
- Removed `Options.exec_profile`
- Added utils.py::`path_is_unc_name()`
- Removed metrics/constants.py::`EXEC_PROFILE`
- Added engine/dao/adapters.py
- Added engine/dao/migrations/migration.py
- Added engine/dao/migrations/engine/\_\_init\_\_.py
- Added engine/dao/migrations/engine/\_\_init\_\_.py
- Added engine/dao/migrations/engine/0021_initial_migration.py
- Added engine/dao/migrations/manager/0004_initial_migration.py
- Moved engine/dao/sqlite.py::`register_adapter` to engine/dao/\_\_init\_\_.py::`register_adapter`
- Moved engine/dao/sqlite.py::`SCHEMA_VERSION` to engine/dao/\_\_init\_\_.py::`SCHEMA_VERSION`
- Moved engine/dao/sqlite.py::`EngineDAO` to engine/dao/engine.py::`EngineDAO`
- Moved engine/dao/sqlite.py::`ManagerDAO` to engine/dao/manager.py::`ManagerDAO`
- Renamed engine/dao/sqlite.py to engine/dao/base.py
- Renamed engine/dao/base.py::`ConfigurationDAO` to engine/dao/base.py::`BaseDAO`
