<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="377px" preserveAspectRatio="none" style="width:347px;height:377px;" version="1.1" viewBox="0 0 347 377" width="347px" zoomAndPan="magnify"><defs><filter height="300%" id="fe0et5gl7cq6t" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fe0et5gl7cq6t)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="312.5" x="13" y="128.2031"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="51" x2="51" y1="52.9375" y2="337.1328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="284.5" x2="284.5" y1="52.9375" y2="337.1328"/><rect fill="#FEFECE" filter="url(#fe0et5gl7cq6t)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="23" y="17.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="30" y="37.6357">Client</text><rect fill="#FEFECE" filter="url(#fe0et5gl7cq6t)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="23" y="336.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="30" y="356.1279">Client</text><rect fill="#FEFECE" filter="url(#fe0et5gl7cq6t)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="253.5" y="17.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="260.5" y="37.6357">Nuxeo</text><rect fill="#FEFECE" filter="url(#fe0et5gl7cq6t)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="253.5" y="336.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="260.5" y="356.1279">Nuxeo</text><polygon fill="#008000" points="272.5,80.0703,282.5,84.0703,272.5,88.0703,276.5,84.0703" style="stroke: #008000; stroke-width: 1.0;"/><line style="stroke: #008000; stroke-width: 1.0;" x1="51.5" x2="278.5" y1="84.0703" y2="84.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="58.5" y="79.0044">Ask for a batch ID</text><polygon fill="#008000" points="62.5,109.2031,52.5,113.2031,62.5,117.2031,58.5,113.2031" style="stroke: #008000; stroke-width: 1.0;"/><line style="stroke: #008000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="56.5" x2="283.5" y1="113.2031" y2="113.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="68.5" y="108.1372">batch ID</text><path d="M13,128.2031 L90,128.2031 L90,135.2031 L80,145.2031 L13,145.2031 L13,128.2031 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="312.5" x="13" y="128.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="28" y="141.27">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="95" x="105" y="140.4136">[chunks count]</text><polygon fill="#0000FF" points="272.5,162.4688,282.5,166.4688,272.5,170.4688,276.5,166.4688" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="51.5" x2="278.5" y1="166.4688" y2="166.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="58.5" y="161.4028">Upload chunk N</text><polygon fill="#0000FF" points="62.5,191.6016,52.5,195.6016,62.5,199.6016,58.5,195.6016" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="56.5" x2="283.5" y1="195.6016" y2="195.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="68.5" y="190.5356">Chunk N uploaded</text><polygon fill="#A80036" points="272.5,227.7344,282.5,231.7344,272.5,235.7344,276.5,231.7344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51.5" x2="278.5" y1="231.7344" y2="231.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="58.5" y="226.6685">Complete the upload</text><polygon fill="#A80036" points="62.5,256.8672,52.5,260.8672,62.5,264.8672,58.5,260.8672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="56.5" x2="283.5" y1="260.8672" y2="260.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="68.5" y="255.8013">Response OK</text><polygon fill="#A80036" points="272.5,286,282.5,290,272.5,294,276.5,290" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51.5" x2="278.5" y1="290" y2="290"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="58.5" y="284.9341">Attach the blob to the document</text><polygon fill="#A80036" points="62.5,315.1328,52.5,319.1328,62.5,323.1328,58.5,319.1328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="56.5" x2="283.5" y1="319.1328" y2="319.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="68.5" y="314.0669">Response OK</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="57" x="278.5" y="12.2822">New upload</text><!--
@startuml img/new-upload.svg
header New upload

Client -[#green]> Nuxeo: Ask for a batch ID
Client <[#green]- - Nuxeo: batch ID

loop chunks count
Client -[#blue]> Nuxeo: Upload chunk N
Client <[#blue]- - Nuxeo: Chunk N uploaded
end

Client -> Nuxeo: Complete the upload
Client <- - Nuxeo: Response OK

Client -> Nuxeo: Attach the blob to the document
Client <- - Nuxeo: Response OK

@enduml

PlantUML version 1.2018.13(Mon Nov 26 18:11:51 CET 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.5+10-post-Debian-1deb10u1
Operating System: Linux
OS Version: 4.19.0-6-amd64
Default Encoding: UTF-8
Language: fr
Country: FR
--></g></svg>
