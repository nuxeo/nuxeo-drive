<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="421px" preserveAspectRatio="none" style="width:439px;height:421px;" version="1.1" viewBox="0 0 439 421" width="439px" zoomAndPan="magnify"><defs><filter height="300%" id="f1kp6k784vlmt7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1kp6k784vlmt7)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="404.5" x="13" y="172.4688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="51" x2="51" y1="52.9375" y2="381.3984"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="376.5" x2="376.5" y1="52.9375" y2="381.3984"/><rect fill="#FEFECE" filter="url(#f1kp6k784vlmt7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="23" y="17.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="30" y="37.6357">Client</text><rect fill="#FEFECE" filter="url(#f1kp6k784vlmt7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="23" y="380.3984"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="30" y="400.3936">Client</text><rect fill="#FEFECE" filter="url(#f1kp6k784vlmt7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="345.5" y="17.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="352.5" y="37.6357">Nuxeo</text><rect fill="#FEFECE" filter="url(#f1kp6k784vlmt7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="345.5" y="380.3984"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="352.5" y="400.3936">Nuxeo</text><polygon fill="#008000" points="364.5,80.0703,374.5,84.0703,364.5,88.0703,368.5,84.0703" style="stroke: #008000; stroke-width: 1.0;"/><line style="stroke: #008000; stroke-width: 1.0;" x1="51.5" x2="370.5" y1="84.0703" y2="84.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="301" x="58.5" y="79.0044">Ask for uploaded chunks using a given batch ID</text><polygon fill="#008000" points="62.5,109.2031,52.5,113.2031,62.5,117.2031,58.5,113.2031" style="stroke: #008000; stroke-width: 1.0;"/><line style="stroke: #008000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="56.5" x2="375.5" y1="113.2031" y2="113.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="68.5" y="108.1372">Uploaded chunks</text><line style="stroke: #FF0000; stroke-width: 2.0;" x1="358.5" x2="368.5" y1="152.4688" y2="162.4688"/><line style="stroke: #FF0000; stroke-width: 2.0;" x1="358.5" x2="368.5" y1="162.4688" y2="152.4688"/><line style="stroke: #FF0000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="51.5" x2="363.5" y1="157.4688" y2="157.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="58.5" y="137.27">No such batch ID:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="58.5" y="152.4028">stop now and start a new upload</text><path d="M13,172.4688 L90,172.4688 L90,179.4688 L80,189.4688 L13,189.4688 L13,172.4688 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="404.5" x="13" y="172.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="28" y="185.5356">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="105" y="184.6792">[missing chunks count]</text><polygon fill="#0000FF" points="364.5,206.7344,374.5,210.7344,364.5,214.7344,368.5,210.7344" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="51.5" x2="370.5" y1="210.7344" y2="210.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="58.5" y="205.6685">Upload chunk N</text><polygon fill="#0000FF" points="62.5,235.8672,52.5,239.8672,62.5,243.8672,58.5,239.8672" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="56.5" x2="375.5" y1="239.8672" y2="239.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="68.5" y="234.8013">Chunk N uploaded</text><polygon fill="#A80036" points="364.5,272,374.5,276,364.5,280,368.5,276" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51.5" x2="370.5" y1="276" y2="276"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="58.5" y="270.9341">Complete the upload</text><polygon fill="#A80036" points="62.5,301.1328,52.5,305.1328,62.5,309.1328,58.5,305.1328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="56.5" x2="375.5" y1="305.1328" y2="305.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="68.5" y="300.0669">Response OK</text><polygon fill="#A80036" points="364.5,330.2656,374.5,334.2656,364.5,338.2656,368.5,334.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51.5" x2="370.5" y1="334.2656" y2="334.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="58.5" y="329.1997">Attach the blob to the document</text><polygon fill="#A80036" points="62.5,359.3984,52.5,363.3984,62.5,367.3984,58.5,363.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="56.5" x2="375.5" y1="363.3984" y2="363.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="68.5" y="358.3325">Response OK</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="90" x="337.5" y="12.2822">Resume an upload</text><!--
@startuml img/resume-upload.svg
header Resume an upload

Client -[#green]> Nuxeo: Ask for uploaded chunks using a given batch ID
Client <[#green]- - Nuxeo: Uploaded chunks
Client - -[#red]x Nuxeo: No such batch ID:\nstop now and start a new upload

loop missing chunks count
Client -[#blue]> Nuxeo: Upload chunk N
Client <[#blue]- - Nuxeo: Chunk N uploaded
end

Client -> Nuxeo: Complete the upload
Client <- - Nuxeo: Response OK

Client -> Nuxeo: Attach the blob to the document
Client <- - Nuxeo: Response OK

@enduml

PlantUML version 1.2018.13(Mon Nov 26 18:11:51 CET 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.5+10-post-Debian-1deb10u1
Operating System: Linux
OS Version: 4.19.0-6-amd64
Default Encoding: UTF-8
Language: fr
Country: FR
--></g></svg>
